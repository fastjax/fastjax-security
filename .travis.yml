# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -DskipRTests -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -DskipRTests clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: X7XSbrQ470tdWhczyr5ToQjsDtFb1mj9nOsAIclYtwNKrFD1vC9lOqmqh53IVLYnE3sPdUsJF8TyhfI0nsjjYnciaOcNbaI2XNaIGUiRbI/KD33NP0T2G+aofwZpsioT9aLPDyEubzRnGiHw4eosgpoRsfhStqgAAqAoDEHsQv+gAhYQqbaFoNJ1c2tu45G2LVy19g8KM+hn0aPt/l7mkpCx85Mg3Zy/rH/uUSI+8a35XypeNq020PpmdRrnu3T93KuYe1kXR79qgcg6ZCeYWby6vkdBjBxic1Gyimv9uONsbN+McGaSRwQGIF+wVokFct+ANAuTCINMcvJiNV4jairxghg1Cm5PT3lCG0OduaKpuaW1d6DN9jR7zDiI22vInNYQ8q1Mf355mvTeiAqfIfoBWeEjTG73zI5d0NnSbX65Nq+JBFmQMyOEeUljjnuhx04keCl4yINWh6N9uSf1TgBP/MfNmUW4wPCsDwCOMu/UnFRGwO5kpd0gXBKamJk2tFhgPgQb7U0RL+2ZdNi92/1B5pOtFFv1xXqXI3ECZWJp8dJWsoDKweJZ3MSYf92+xTWz9q/NbKT+lZOh0KnFTvZZpmz9AfNVFnRfbTvEAXsxkL4s1P79Nz+/HtYIWZXPtZqMCFT+Hfkr46QpZVGdjsKcZ3paTpEd5LSdVHC4h/4=
  - secure: AWqGZF5vu0FBYg2sqlHmIxF3VPhixJm0ShwF/vFqW0qahEi7xoD0sT2sa53Ae8ViWBW9g12OTYS85Si4YGInnVqEwTXg3Cff+/msI3n7jVSUyyWuu8L1vPUeD0X35FEMNxhlYmAAVoxaKk6bZIhuVg0/rVv6LTdHbuqycv49pdKK+QM0Ab03jkEWFQjnLZaoG5X0fEm/LmkatBqYkH3XncEfUXyuREMTka7htjuaE0XW0iyf7zJUcWXXkJqWbgnZ409+fGxhkU6xnnio/9Te/5YdmoPmYa7ouRTbSFGLswrTzVkpVLipQXADmddaKUQzO2JTpY2xLr6K0chVpKKzewPOkzS8F6GnXsHiqZb3aLxIddFrNbexWMGh9xsZV89SDOoIeefNqFt3HdZ7wFtJ91X3cYVvnuJz1FEBO494i4WCTV4ke9cB6XgoiSV292Pm2Q8X4Pc3nYjFymoSak21DJz2oDF4JbImdnbWEnrsx7yBSKpoMtNHSWRAniyxLU1BB69zstlwFMs7+2lIRa95WWWqDKEwAFC/UZejYfDWGgR6uZ1q/DJS7Pth1cbGnS6MzCjmngygBU8Mnn/aMWFSkrYmHCovVBBX1+We0+8CNz25uvRaqd/IBk341oi9awx+Lo1Ky//M8qeY84NIv1XBLRSYDmGbEmOEbMwDkujFomk=
  - secure: GeCrYh59RbNHFlwFjLW5yyOggvf5Qk/aPWRtrRvvKRJmbQWn9WVjkVmCaLl2BvzndXMYH8wxKAbF/iSfu6zQ79qRfJZoNTIvtJ95MyxA2d6UaQSd/EQsRuI+iry1N+wp1Fs8ZTDuEi41anVzN2alvRo2iZX7ReEDRZ2DHfRC081cDHlBNKjGWgycG6VLxfBwCZdD4FKNxds/TypCvO01xSYv0IK6U12VS9z5JoDm+Cy8bzWRw0WfoVEFaNT5oFqxYlHdhRytizyHuZ0CEG2CRupyj0dVvWy++dlpvhRWS+VMKU0bFXGKwHDo3dAQA2jHSwYw35bSjqjtf5I90pjiyJMrHGIL5AFlh2X84h6Qiow8CbSvsTJ179bQH5d9e3ua3X9Tk3ytBXc52P5nVPWRwBzp0fBho9bQv9T48MCFdd/Pr6LuELal7pU9BlXUeX8lJ6eoT5Eq3ujAndqFXb00fgrs5lVwubZr0VcM+xuMxglV/AttiYa/9bNxyrbgRTMLSN9yxJGC0+AZ434MC5rJmzw1ui170tPRUY/KNyP3DjGLCMe/fWUOc01sKiy1xPEXtkZsSJtErpYsg2pkuz2JIHiCMZ9vaeUV9NtaWdgXzKnroPKEUvA8wQ1MAm+fAQBZM6JNXBfx4gQNIUY93DuW44nGB05LgE5OdnM51ua0xxM=
  - secure: YZQrvVQCSVe3gHaKtQU1Z0GIcYBUdOU2/V4dqM3s0Syp57RuXCYFaZ7NZ15LittjexctQSq2lOMNr+XgYd4FLBPGBpgh2YAAMgMXaeOYoEA8hYyeLj86IWgio/rHR/UiYYKIHj7uNMQ4YVZAl4GE5tMTl5W4c4w7Gu6pZqrsZbmLtoBRjGS71QUohew+ECWVBbHGn15zTVJ8Zvbc+r4C2CdK3I7DPcPFTKMwpNLdPM/oVbKFm9IO7kv8PqYeD1tOxghQTpQBUXBnC6oEGJgjpPT81cuxUdITf4cM66k6kadtVQMQ0Iy7EQezSAdfF77JyZE0fAga4au9j/P6Y3r2upPZCnkuKIouNWaTi5x7M4LTaRDZNRkIojGHlF8TBzGcT4Ag5gjdcqy2kby8LU4X5GATyRqNd5bIyML0CdIFuHXOjorON4hOyJAQKJCmvkB180Jn+bQBuvjHWZTf+itcaX/EmxkPbu1SdmXt9OmxXXqeGT+VDQfeEm1zmUA9TRaMYsL9MnsBbK12bUcCIaMKcT/PlM3R/hr4S1L7OtTlwNSIiECO0R8gQhwEMD+Fpk5hJYFFgtiuqlFvVxyOQd/dzr/KZqqJfiGFyA9psBiGMwp+VuQWPj3S80ebOFiijXHaDYQXWP/xzcLSqsjaBx6jxp1EhGI4t/weU+uZpCbH0bs=
  - secure: mPFVtkJhFQmvkvjtvMofc7+/u5KlUxW2WaaU0R2RtUyl6A234Fmk9G68be8rs1k9exeL7q1mHEtQlNgz1bMOUEbLAn/WbZGqjYKoyCrwRtleycQPOWBJfULnWVwCw1KxwXC+XC6J66YCGI87WJmvu6jqmEBajq8E8hYZ3NURIilfU+O8gLdJ9HpFn0sJSRHhC1e/v/qKZyaD7cukaC9MClb8zijl/c67d6f71AEwcLpl0pnT1GfI6B7MzfRwYhqFV6ReZas4Li2n9THimsKN5NZrIrgW87fzKFES15Cl3ZnSvoJ2wEjwjGDU1fsfHFA5fnvw65mL2ucf35tbgNcjNzQY9MhlQ8oNugIkVuXM/SdGHez7TGLCLYw2P0mL7G7i7lbJ3rMFyOEQPbXjjCH+3JkzZ0Y7EYJVIlaHWlv71TKpYmEaf2Dtrq1vtzEzqX4O0clD3/XTRg5Slv2JGGeXaOdR7MvMnNFaOevq4s+1H7Pe3dSDAT4X762ljYMNQpstqUXOx0L68rgD7CMR/kUxgmV+Y3hUEFteAaqRNISkDOxkA/koekjHxjLRk6tD1poTwr3uK94K4BJwKHELcCNH2a5t+nYEm3CpjA/Z5hZs04gGz/wzf8BXy0n55g8n91wJeolpWQ0Tp4ZxwM7fG3fUv1N1lYgPhA9L6UVfBHIopMw=
  - secure: JyqRKeLdEctiITy0gwQO+IXEF9KfgspuK12uOA35QoBWZq82AqxYe36kqVy6jWezYm+g+RalVSn6sFJ4xByJYq8+Wn+vzQxJ1TjQsosZDYsvmcUMpn6P8ak5Mm0Sp8GRYUQHTzWYu6YROSrOA4/c+bXXrRY9OgeUem03TRcTk/n58Bh8uvd47pTa/ohertR6vqwLK4x/H0dIWNP8AxhVIvPf4I0Mb/9osM+LjcAmSmdeKYoiBOZDolPyiGILcAsn86gTBBANytdKYmnhrH0sxMKqtTKhzcYnXSw5ixzwkybnY2oTHt/WZBQ/l0gbFfBjx2a52tYpvIl45FJxpj0qF+bUv5SVx31q5PRh7cTO44nfXa+YRm/m3MC0J3InAllngVl/tIOnSIuWCZ2/U+FkbhZ74cC9Gf/jQncZ5C8vFB5U0MBH+S8NrHvFBZovCtAAwvGUGo6qziF3Ew0uaMjKRLeH2fuGriiXbfiA8455RMyaYDMZjh8qR+zhAo3ll9lG8AqveVzZ3300lQx/8BqTB6ornzuUiyGgbHHsPgTGLrTj6KJLEqUG+G/jh82niIZ0WadxXqfhQHJKhZdZ7UsJHi8Pa9ndmNFJyq+bu9RNWnk/Tdp5ExV+2hmWgvIcK80rPez/w/Ng6jifkqy8mIOvaYoB17/b8szp0lxRCu8bYfg=
  - secure: lw7oB8LkJnORrqBu7E1Qkq9utAM/twxABjiMWF+2/qi2fY/igQ7qM28VPBXFnFjYp9zv7l66DaX1kYQvI+gzIVJSVPly5jb4+tyAP9tbuytm0vZcJrEIplZmmkAAmpWSKPjgxVgQ390BLZbh0OwnqyyhVD7kivq1JOgbLwfDBhTeAyyJc/SRo8F1usmH11r8ax018n91o/9GxGr11Oc3e3aSjy8F0eQy00V8Jm12FFocgb3gRjWjM6ZdkKryNvVeoc/Cb2V8phXz5IaH2up6BtCLSeBGeg0qEG+dXs9uAu4dDdEcGYodf7FWT/7C7/9IWIz8Q24srf8LnZuqu+6USc+iRHH32/AmMCDT92flRfvht8fyln83UwU0q1U6Jnk4dyqpeq6l0gDl4vXtzlbtlbQrFv6xMwj7sK5veTT1fLI9s9YPc/47vl0rMo6BLNcUZCzaR6oXwWIZ0UYaZ2HFS8J/GkO1Hm81/BpbbmZb+lozLQtS49MusRyGfwFGebqDAKNHUzic2+bl96xNqBLptuTdMwTnfG0h9WLQZzTT7MsztOuqDuPrdKRLq4OXS6xt01AsFk78MGo506WAD08X2qxiY4YEWHnIAvdNFtCiPEKRPeGwbuIFi7i3rqsvDYbH+Y3mWJnF7pU6kfs3nYCq8+JbKx5yKVLvM6P7rFYzRDQ=
