# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -Dmaven.rtest.skip -DrepoToken=$REPO_TOKEN clean deploy -P deploy;
  else
    mvn -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: fsnIYNA697r3NeKha8PxTo7xKXPSZYQFCJ7gIj3fse4lvM92856PpT0pZO56pyySkGw8eRiOfEiu0Nic5Wl+gJsb5VSXrhGV0QgvkTfAoG4vdDQfv8QjUyn/9QeTBBWeN3sgbfIukXV7+63F3jdGpGL3gNQS6LIEwx71czlBR87XsT/PMoQOCMDECydSJJg/3KY9ktHZc0E8G8T2jpHlGxVbKyI8SrCoBdG28eHGefCT3orq1y6m/v3kCJFtSsxZg6YsneG5edEzblYtpRZKNpyG1AOaVYkNjgpOBBHp9Q2TaviljVvceJZKdyY75LGwn6OvBTjjvLx0tTlpJVhXvG7DWimBFRlMfwPX7IepB/gp6X/DwOHUMlKlgGgm50UpF+SR4I3y9OkbbxdwO+pzhPUdclfc09NYprX5El+iDt4XI/nz07Lgz2chb0jiwwGN92zJDaidrHBGyC3kgNoK2mckHyOm1FTsiEaf1lJPgIXzB1tdgf6nx1xPkz8SztNOGLKAnPMtrsAvyxJdlBbZB9zrwoAA2CrxGNQV+rGJ86WLtsItbksyrtttmJ1oszZArU6yKLo9bop77JFIed4ALUUPGEh787FU/BBDyhehJZh9zIZOZMpWlut/ChHdOQMH9NY0RFPnbr2o/292NgIatfnroG+kNNkSJlEDtcYMNZE=
  - secure: T86HwdunuTC7KXjzCAp4kETqdyRZLCnLjiQ7GwN4o33TcI4DgsojEwWMAQin2bF52lAuKgDMAXigHsGosfVq27cYy17kHa5XwhEkW7XjMyzl4dhZK3odFKUdmcfHiKpD157bhxv8oczxYqP+chJ8OmlZlDT+t1jWs/n75+26O3hSZsgViyPOTTGPvYS1245IwrFOb1/Sqnr7Qss6kmpYmAJs6fO/IeDxjq4X6P7nRmaVD9qfR3YhQO4W7YEZLZJg559w0f6FlEDuGoG3dYDWKCRaj+Yk6UqUd+4oi9pNTTesuXpHN9rsAunA4bYUQPUWAB7EJLuc4eEV2itU5M7vltQBS441D6aa5GS04KYDHFcEVVhi6qN7IGrAoLRSgmFJ334VbdLZSf+qRzHL2Ii1IBmaHdcgte9wLzaAL1TLkGHjxI55PUijFTLRdCTA5Y6NReDv8BYVw9giyjrZswnEZyHZ9RNUczr7HK9CyrL1fxyJ5ZM3hQ5ppFI7aYM79QjecMMoLa7uckl33wG7FSIh2D8/E3j/5kwKCMjYs3x2bLMhkpIiXfrmVaeatOqt3hACcy24wx+TslsY3ZgNpuKponBHgEOGbNd8F1ZKXeJnGFdxOfN0ZiK7qi1SDEIa1cn1Z9urr5Imcm/zhQnBGuuW4NBfeHin1uFs//DUaKMLkKs=
  - secure: Iv/qh3kWTG2nKrUhAA2bmYQZE7wQHcZLbyyyI/s4ueT9t9XVcC9uIzZ+fmn+mvLRL9o161eI+zy0C1kEp7LVvjnRNxWgNVQs449bflyUMrAeX8wpi5S2l2LQfw+vibwsd/OaBtr3tkObRriqgRg7kupBfweGqzQe1RG5AzAw1XhzTC6fE08C8W/TKULh7REu50uph2dTTVNX+Jv0dJJMgqYwrvws7B/Evc361l3+XZhP8A3OSJH/g6ZQ5D5GyB2qirWAV3Dgql1IQAW5DYsLEylT7lGRVzlivr92BYKnwFCdEr5ExEL44yKgWEs0ULWf7JfyoRxVH2+X3BZJaT43UG+PkV4zDVOAAFKWNesFbQie0WVZV2QTA5ZxV4pFDDrb3ZfZWxJtAOHM1CT8pbkmGdutYxxLPwmz5exNUo8Uwq8JJTTYe0g8bWI4JdGinQYvvQ2WRxYXAstTRbZXrs4oE02POu1Kri7G+dJlZW2HWAxerv9VdcjgIRa50MrDyY0kzpeqxcf9d98ywiPSc8KVYJPG7IRfoR2sFZWP7VT9sbScZSFQkVOnOsD8B+aVqXGYrIEKpSJBLXIdr8rpDRd9xtVH4StsrYcBYf4znJwX1yi0/3JsfrwPRhGcRqORtFjZIV0K8XWoCcj5CaPPto1lStIXozofm5/emHOg+oBFHM8=
  - secure: Pc9QFaYPr49QBvOO17fdZmKcuuxuOZDLEj199liqCN03sIbVuOObC/D71ECBQHVzj7n0dkym3HXkc6i0LKAwWmJBjagtb7+b3aN4s3c3rAplFD0zQfznCv1n4bskNgfAgL4wVq2+BhUbLyrcNVBGW34fNK9YFTRLyRXmnCFyiffyRLpWYqBrnwwWEQxmxt5LKeBXbNfyA04JlYdsmXK4XbXUY50nP1SX5hGnvlGp5LgIzXDbO9DG1qgzSXhkfZ0sND00onQsLUQy4MWN0tIrdyPeOoWlXYDcjcMS58mp3xHWjzIiLlDAPpqSCyZnUx1lJvpBzf89ByLTwZO99JG25yP2009+Y0HMesUaSzIPlq9Rr1XGm2djymjpMIv53qfKAIkLW30pug8xewyRZ5iodfGle5FPh9G45ZfJVXZnw8zQtOe9fHFEz/bVKNNH4L8i7JPY653Pym76l9Fq68MwdNm0RnYl7ZlMH748zuIUIM2HbC4gPhaQKzwF2jd0YkThFg1vSIAtWA553t6YcNesFPDTttCP3qrwhFScJQWg8dFCVseSW3wZ5BRE7NgFzWfippOG4opYnuJBYhdeldAHpfviEPudJkNHv0pZyqOf0U1KzRI4d6ES0PB9+/q98chhjDc98Zn4W993zUXrkIUJyvq8qnI5MACqnivuRWqdkVM=
  - secure: DyXJjvCKB02/qRYPqX1afa1ZtqnI/NO0CDjX4AIWt3Lgld2yUiDNnaI7cHWFjDnVETnVW6L1CwwG9YpahkKIVruk+ozQ43RMXSa2hdtSUtGF+HCYGdnfTX3X3S8iGXIVI7MEsyr7uKs44LNuTv8O4lZA0atxddVZy6qOa1VdvyhU17tNPD4ynM5K1c2TxNs9BV02VY6kiK3FJlA8HzOKenX05ycCxT7KnW7C0BYu35iu75+BquJbDB2KswAgkhVDjlorinDmaZoVPv5tsoMrzpgFMBp3Yus7vp1Bz5/tub6P1AKoObqI+k2IvTShCgFbhB3ucDwdFm+1yqbk06MG3cVCAVrZ0zBU+yTGlkLHGPlWBE8DIg/0L39sHqe/ZhH5x3WwdeV33HyH8hM0EzTh6SPzmfs8rHNDWMWUeHwy+z+WxiwEU4GVcPRDKGsnq6dMbzY9f3Dbx7tkOrSLJj+Gr97hA+iVJld+EblhGahfRlQfpQL45rD7efOKVG2xRy3jn41dgZ3oIISnWpJLPhgtjW5B3mVDxHZKhXBlbXsi+eieiFgAsQZ8uzzhjXH7AeGSjU9QPeVosmmCHkFWzSHUEoI5wFSXIAr6EqR+DIi+8xyVboqm1FkKjfdUctKvMnEoofjwQjt/MOHQSiOJJoZakbamZ/njhoLWsaRy7WELvPg=
  - secure: BJ6YyENNylMtXSAqqKNUWKiG/kRPQhSkrZui5jJKImZnmvcbRVmbOU/iERlqyAgWZT9NKQLvq0ry4EfRcxGWofk153+Q5cNVoFpT0ph8c1vodJ4fYv+EPJSPfdFoSWwQ1U2VUGsmuuZteBqtAgNTJyXuT1xJ0S5PCtjyNOcTZASp6r4Ao/a8u+LRv8tf4G+RWE4k4rheNDid7M4pSnm6qUfh4LNWf/ypTqPXmkxQ+9dDeKUxIHO2LzGWtKQ6wV0iXvIBsBGFATfdUVoUkdEJiEpiX4auXaLFtWnXg2PHQ91329PP5Lngo5qNP0M5CDPyb0jgxekxFh8ooooYu6K6n2VfIbERVssAXmualDp6Z0cCmZysuBrnkZw6fKdpb6ofHppKdJDkwwYBoxTf0hHxX8PLr21jJz+Xw8kTT30ywlFZe/vGryv3zdjtPiqdZA3tt3wPrCUQ/r6ymy7lRzuaETDygd56l+BHI9mGH3M3nBYglOoCDYY5D5LpTAuFQEvAegth7T2SnJfhEP+0Jlz9DpqwLmlTGgBRfNTj+pqQzbbsOXC+9s23i6UHVObejN6cSJaQvqxSDCnZGkaK8gJ6UBQQfPmrUcalL4MT8Z93ePN+mLgn+5pQ6nplPURIAV/TWb3znzG3JzS0dzp4jWPlVmhu/9yrEtEDVzcdUR82/tE=
  - secure: O+rfS+wZpQKVKOEwFaVxNpcS1kg/fMUvdAAhEFajPsYjXxE/vxzZnExtUYcjWAwoGAkkr9/qG+y3vWI6WJQVot5MOKfdyVG4rb+lXBw0v3h4k0RIVqExtminIOfUFD6uO/9Z3dgCn6viNV4bh7WQJVRzjJXLa+HluAqM3BWkC3UuoHABkUvS/9eQdT3Ax+q4NOYLVUAx0HHI1lUkXP2rCNPCll3bPMYfdYcHsLoLkOuyzeXR1EhiqOJMtKIJ7mHmxFyrdUAR+vOEOzOqoPvaxO/p1sb/Qjhr9W3IMX6bsEdVMqSA9pEX7oETRpJE1UqSc2Z7X9ahzFF5v7HrkfbXgA7NtehXb8It+kG3pGBz4KtGE54MEmIae5HtQQhDM0LBs17BiI41jVs5ZVT+xJm0L8ROVeVr6hwOE7UUH9+YtJGSLMR3rZH9sgGE1qh97CHTLcEFIWW1bwEGMK9gg4TT9WKJa0kfYgZ5rwfJ8z6u8j3ZReioRpmjSNwesrV4gFQH8D1OuvcnSnN1Lo5l6BIiepAmKZE9lTZRF2QFN6ZugUUvbPT+xhawCdsXQ5GqBqsI1QRk87YAca40x8qw6PuzmPMCpqBpHZ+UQqV8oYLA5+TVe/GxAqjB9ZGEIOBr5l1ifh2D9srmkqTJbsd8qU2uCGI1QlQ1TjvDnNa1A5ZnjuY=
